import { useTheme as p } from "@chakra-ui/react";
import { useGetOptimizedImageUrl as a } from "../../providers/ImageOptimizationProvider.js";
import { defaultWidths as f } from "./defaults.js";
import { toPx as c } from "../../utilities/units/index.js";
const d = ({ url: t, getGetOptimizedImageUrlImpl: r, widths: e = f, format: o }) => t ? e.flatMap((m) => {
  try {
    const n = c(m);
    if (!n)
      return [];
    const i = parseFloat(n);
    if (!i)
      return [];
    const s = r(t, { width: i, format: o });
    return s ? `${s} ${i}w` : [];
  } catch {
  }
  return [];
}).join(", ") : void 0, O = (t, r) => {
  const e = p();
  if (!t || t != null && t.startsWith("data") || !e.breakpoints)
    return;
  const o = Object.values(e.breakpoints).sort();
  return d({
    url: t,
    getGetOptimizedImageUrlImpl: a,
    widths: o,
    format: r
  });
};
export {
  O as useOptimizedSrcSet
};
