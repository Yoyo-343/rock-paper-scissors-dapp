"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("react/jsx-runtime"),u=require("@argent/x-shared"),s=require("react"),m=e=>{try{return new URL(e).searchParams.get("url")}catch{}},d=(e,{imageOptimizationUrl:t,width:n=1024,format:r})=>{if(!e)return;if(!t)return e;const i={url:e},a=m(e);if(a){if(a.startsWith("data"))return a;i.url=a}return n!==void 0&&(i.w=`${n}`),r&&(i.format=r),u.urlWithQuery(t,i)},o=s.createContext({}),f=()=>s.useContext(o),g=(e,t)=>{const{imageOptimizationUrl:n,getOptimizedImageUrl:r}=f();return s.useMemo(()=>{if(e)return e.startsWith("data")?e:r?r(e,t):d(e,{...t,imageOptimizationUrl:n})},[r,e,t,n])},x=({imageOptimizationUrl:e,getOptimizedImageUrl:t,children:n})=>{const r=s.useMemo(()=>({imageOptimizationUrl:e,getOptimizedImageUrl:t}),[e,t]);return c.jsx(o.Provider,{value:r,children:n})};exports.ImageOptimizationProvider=x;exports.useGetOptimizedImageUrl=g;
